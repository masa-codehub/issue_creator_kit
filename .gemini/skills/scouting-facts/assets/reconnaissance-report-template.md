# 能動的偵察レポート (Reconnaissance Report)

## 1. 調査対象と意図 (Scope & Context)
<!--
【分析へのインプット】
analyzing-intent が「何についての調査結果なのか」を即座に理解できるように記述する。
ユーザーの依頼文に含まれる具体的な名詞や動詞を引用すること。
-->
- **ユーザー依頼のキーワード:** (例: `JWT`, `expiration`, `UserAuth`)
- **調査の目的:** (例: 認証トークンの有効期限ロジックの特定)

## 2. 収集された事実 (Evidence)

### A. ドキュメント上の規定 (SSOT)
<!--
【分析へのインプット】
「あるべき姿 (To-be)」の基準となる情報。
ADRや仕様書から、今回の依頼に関連する「ルール」や「決定事項」を引用する。
見つからない場合は「関連する規定なし」と明記する（これが重要な事実となる）。
-->
- **[Source]:** (例: `docs/architecture/adr-001-auth.md`)
  - **事実・規定:** (例: トークン有効期限は24時間と規定されている)
  - **引用:**
    > ...

### B. 実装の現状 (Codebase Reality)
<!--
【分析へのインプット】
「現状 (As-is)」の証拠。
ドキュメントと異なっていても、コードに書かれていることが「現在の動作」である。
変数の値、関数のロジック、ハードコードされた箇所などを具体的に抜き出す。
-->
- **[File]:** (例: `src/auth/token_service.py`)
  - **責務:** (例: トークン生成と検証を担当)
  - **事実:** (例: コード上では `EXPIRATION = 3600` (1時間) とハードコードされている)
  - **コード抜粋:**
    ```python
    ...
    ```

### C. 物理構造と依存関係 (Structure & Dependencies)
<!--
【分析へのインプット】
「影響範囲 (Where)」と「手段 (How)」の制約条件となる情報。
どのモジュールがどこに依存しているか、変更することでどこに波及するかを記述する。
-->
- **ディレクトリ:** `src/auth/`
- **依存関係:** `pyjwt` ライブラリを使用している。

## 3. 発見された制約と矛盾 (Constraints & Contradictions)
<!--
【分析へのインプット】
analyzing-intent が「ギャップ分析」と「リスク評価」を行うための核心情報。
SSOTとコードの不一致、変更における技術的な壁、絶対に触れてはいけない領域などを明示する。
-->
- **制約事項:** (例: `User` モデルは `shared` パッケージにあり、変更の影響範囲が大きい)
- **SSOTとの乖離:** (例: ADRでは24時間だが、コードは1時間になっている)
- **技術的負債:** (例: エラーハンドリングが実装されていない箇所がある)

## 4. 補足・未調査事項 (Notes & Unknowns)
<!--
【分析へのインプット】
仮説立案時に「飛躍的仮説」や「検証項目」を導き出すためのヒント。
調査中に気になった違和感や、アクセスできなかったファイルなどを記録する。
-->
- ...

# Issue案: メタデータ操作ユーティリティのインターフェース設計とテスト要件の確定

- **Roadmap**: [roadmap-adr002-document-approval-flow.md](../_inbox/roadmap-adr002-document-approval-flow.md)
- **Task ID**: T1-2, T1-3, T1-4
- **Depends-On**: issue-adr002-T1-1.md
- **Status**: Draft

## 1. 目的と背景
ADR-002 で定義された承認フロー自動化の実装に入る前に、コードベースの「あるべき仕様」を机上で確定させます。
本タスクでは、具体的な関数名、引数、戻り値の型（インターフェース）を定義し、期待される動作をテストケースとしてリストアップすることで、実装時の不確実性と手戻りを排除します。
**※このタスクでは実際のロジック実装（コードの記述）は行わず、仕様の定義のみに専念します。**

## 2. 実装指示 (Implementation Instructions)
- [ ] **インターフェース設計**:
    - `src/issue_creator_kit/utils.py` および `process_approvals.py` に実装すべき主要な関数のシグネチャ（関数名、型ヒント付きの引数、戻り値）をドキュメントとしてまとめよ。
    - 特に `update_metadata` 関数において、どのようなデータ構造（辞書など）を受け取り、どのように全文を返すかを明確にせよ。
- [ ] **正規表現の定義**:
    - Markdown のメタデータ（`- **Key**: Value`）を確実に抽出し、置換するための正規表現パターンを机上で確立・検証せよ。
- [ ] **テストケースの定義**:
    - 実装時にパスすべきテストシナリオを網羅的にリストアップせよ。
    - **正常系**: 存在するキーの更新、複数キーの同時更新、日付フォーマットの更新。
    - **異常系**: キーが存在しない場合の挙動（追記するかエラーか）、ファイルが空の場合、不正な Markdown 形式。
    - **境界値**: 空白を含む値、特殊文字を含む値、行頭以外に同様のパターンが現れる場合。

## 3. 検証基準 (Definition of DoD)
- [ ] 関数シグネチャが、ADR-002 の要件（Status更新、日付更新、Issue番号追記）を全て満たせるよう設計されていること。
- [ ] テストケースが、実装エージェントが迷わずに `pytest` を書けるレベルまで具体化されていること。
- [ ] **コードの実装（関数本体の記述）が行われていないこと。**

## 4. 影響範囲と注意事項
- ここで定義したシグネチャは Phase 2 の実装ベースとなるため、既存の `create_issues.py` との整合性も考慮してください。
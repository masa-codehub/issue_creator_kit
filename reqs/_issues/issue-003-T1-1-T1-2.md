# Issue案: メタデータ操作ユーティリティの実装と解析ロジックの共通化

- **Roadmap**: [roadmap-003-document-approval-flow.md](reqs/_inbox/roadmap-003-document-approval-flow.md)
- **Task ID**: T1-1, T1-2
- **Depends-On**: (none)
- **Status**: Draft

## 1. 目的と背景
ADR-002 で定義された承認フロー自動化を実現するため、ドキュメントのメタデータ（Status, Date 等）を確実に解析・更新する共通ユーティリティが必要です。
現在 `create_issues.py` に存在する解析ロジックを抽出し、置換（メタデータ更新）にも対応した堅牢なモジュールを構築します。

## 2. 実装指示 (Implementation Instructions)
- [ ] `src/issue_creator_kit/utils.py` を新規作成し、以下の機能を実装せよ。
    - `parse_metadata(content: str) -> dict`: 既存の `create_issues.py` から移植し、Markdown のメタデータを辞書形式で抽出する。
    - `update_metadata(content: str, updates: dict) -> str`: 指定されたキー（例: `Status`, `Date`）の値を置換し、更新後の Markdown 全文を返す。正規表現を用いて、行頭の `- **Key**: Value` 形式に厳密にマッチさせること。
- [ ] `src/issue_creator_kit/scripts/create_issues.py` を修正し、`utils.py` の `parse_metadata` を使用するようにリファクタリングせよ。
- [ ] ファイル移動を伴うため、`shutil` や `Path.rename` をラップした安全なファイル操作関数を `utils.py` に追加検討せよ。

## 3. 検証基準 (Definition of Done)
- [ ] `pytest` を用いて、様々なパターンのメタデータ置換（既存値の上書き、存在しない場合の挙動等）が期待通り動作すること。
- [ ] `create_issues.py` の既存機能が壊れていないこと（`pytest tests/unit/test_create_issues.py` ※存在すれば実行、なければ動作確認）。

## 4. 影響範囲と注意事項
- 正規表現による置換の際、Markdown の他のテキストを誤って書き換えないよう、前後関係（行頭、コロン、太字等）のチェックを厳密に行うこと。

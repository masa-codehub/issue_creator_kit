# 振り返りレポート (YWT) - PR #290 Review Feedback

## 1. Y (やったこと)

- **作業の実施内容:**
  - ADR-007 TDD 実装フェーズに向けた Issue Draft（T4 シリーズ）の作成。
  - 完了した Spec フェーズタスク（T3 シリーズ）の `_archive/` 移動とメタデータ更新。
- **事象の観測:**
  - `gemini-code-assist` および `copilot-pull-request-reviewer` より、メタデータの記述に関する 11 件の指摘を受けた。
  - 具体的には「YAML キーの重複（archive タスク）」「空のオプショナルフィールドの存在」「`date` フィールドの欠落（一貫性不足）」が指摘された。
- **分析情報の集約:**
  - `docs/specs/data/document_model.md`: `issue_id`, `parent_issue`, `date` がオプショナルであることを確認。
  - `reqs/tasks/_archive/007-T3-L2-integration.md`: `issue_id` が 7 行目と 13 行目に重複して存在。

## 2. W (わかったこと)

- **結果の確認:**
  - メタデータ駆動ライフサイクルを謳う以上、メタデータのクリーンさと一貫性は「システムの信頼性」に直結する。
  - YAML の文法上の妥当性（重複キーの禁止）だけでなく、意味的なミニマリズム（不要な空フィールドの排除）がレビューの観点として重要視されている。

### ギャップ分析

- **理想 (To-Be):**
  - メタデータは最小限かつ一貫性を持ち、機械可読性が高い（YAML 妥当）。
- **現状 (As-Is):**
  - 空のフィールド（`parent_issue: `, `issue_id: `）が残存し、`date` の有無がフェーズによって不統一だった。
- **ギャップ:**
  - 「オプショナル＝空で残しても良い」という安易な判断が、ドキュメントのノイズとなっていた。
- **要因 (Root Cause):**
  - `document_model.md` において「オプショナルフィールドの記述を推奨しない（空なら消す）」という運用の規律が明文化されていなかった。

## 3. T (次やること / 仮説立案)

- **実証的仮説:**
  - 指摘通り空フィールドを削除し、`date` を補完することで、メタデータの可読性と一貫性が向上し、承認が得られる。
- **飛躍的仮説:**
  - `document_model.md` または `coding-guidelines.md` に「オプショナルフィールドは値がある時のみ記述する」という原則を追加することで、エージェントによる自動生成品質を底上げできる。
- **逆説的仮説:**
  - フィールドを削除しすぎると、将来的に手動で追記する際の手間が増える可能性があるが、現状の「メタデータ駆動」方針では、必要な時にシステムが追記すべきであるため、削除が正解。

### 検証アクション

- [x] PR #290 の分析レポートを作成し、修正方針を確定する。
- [ ] `document_model.md` に「オプショナルフィールドの運用ルール」を追記する検討（別途 Issue）。

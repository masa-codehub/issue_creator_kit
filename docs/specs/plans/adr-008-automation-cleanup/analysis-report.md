# 目的分析レポート (Analysis Report)

## 1. 意図の深掘り (Intent & Context)
- **ユーザーの真の目的 (Outcome):** メンテナンス性の向上と、新アーキテクチャ（ADR-008 Scannerベース）への完全移行を確実にするため、不要になった古い自動化ロジックを完全に排除する。
- **背景と文脈 (Why):** 旧来の `WorkflowUseCase` や `ApprovalUseCase` は Git 差分や GitHub API に強く依存していたが、新アーキテクチャではファイルシステムの物理構造（Scanner）に基づくライフサイクル管理に移行するため、これら旧ロジックが残っていると混乱や誤動作の原因となる。
- **制約条件 (Constraints):** 
    - 新しい Scanner ロジックの実装には着手しない（削除のみ）。
    - 既存の CLI のビルドや主要コマンドの動作を壊さないように、参照箇所を適切に「無効化」または「削除」する必要がある。

## 2. ギャップ分析 (Gap Analysis)
- **現状 (As-Is):** 主要3ファイルに加え、`cli.py`, `creation.py`, および多数の単体テストがこれらレガシーコードに依存している。
- **理想 (To-Be):** 
    - 物理ファイル（3つ）が削除されている。
    - `cli.py` から `approve`, `approve-all`, `process-merge` コマンドが削除（または無効化）されている。
    - 関連する単体テストも削除または整理され、`pytest` がパスする。
- **特定されたギャップ:** `definitions.md` には主要3ファイルのみが削除対象として挙げられているが、実際には `tests/unit/usecase/test_workflow.py` などの付随するテストコードも削除しないと、インポートエラー等でビルドが通らなくなる。

## 3. 仮説オプション (Hypothesis Options)

### 案A: 実証的仮説 (Grounded) - 本命案
*(物理削除と最小限の参照修正)*
- **アプローチ:** 
    1. 指定された3ファイル、およびそれらに直接依存するテストファイル（`test_workflow.py`, `test_approval.py`）を物理削除する。
    2. `cli.py` から該当コマンドの定義、パーサー、ディスパッチ処理、およびインポートを削除する。
    3. `creation.py` の `WorkflowUseCase` インポートと型ヒントを削除する。
- **メリット/デメリット:** 
    - メリット: 最もクリーン。ADR-008の意図に忠実。
    - デメリット: 削除範囲が広く、予期せぬ依存関係でビルドエラーが起きるリスクがある。
- **リスク (4大リスク):** `cli.py` での削除漏れによる `ImportError` または実行時の `NameError`。
- **検証の視点:** `pytest` および `ick --help` で旧コマンドが表示されないことの確認。

### 案B: 飛躍的仮説 (Leap) - 理想案
*(段階的な無効化と警告の導入)*
- **アプローチ:** ファイルは削除せず、中身を `DeprecationWarning` を出すスタブに置き換える。CLIからは隠すが、内部的なインポートは維持する。
- **メリット/デメリット:** 破壊的変更を抑えられるが、本来の目的である「クリーンアップ」が達成されない。
- **リスク:** 負債が残存し続ける。

### 案C: 逆説的仮説 (Paradoxical) - 代替案
*(新旧共存期間を設ける)*
- **アプローチ:** 現状維持とし、新しい Scanner 実装が完了してから一括削除する。
- **メリット/デメリット:** 安全だが、Issue #320 の「今すぐクリーンアップする」という指示に反する。

## 4. 推奨される方針 (Recommendation)
- **推奨案:** 案A (Grounded)
- **理由:** ADR-008 では明確に廃止が決定されており、物理削除が求められている。テストコードも含めた完全な削除を行うことが、長期的な健全性につながる。
- **残存する不確実性 (Unknowns):** `creation.py` 内で `workflow_usecase` が実際に実行されている箇所があるか（grepでは型定義のみ見つかったが、動的な呼び出しがないか再確認が必要）。
